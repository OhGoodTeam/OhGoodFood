<!DOCTYPE html>
<html lang="ko">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />

    <link rel="stylesheet" href="../css/maintest.css" />
    <title>Ohgoodfood</title>
</head>

<body>
    <div id="wrapper">
        <header>
            <div class="header-container">
                <img src="../img/store_ohgoodfood_logo.png" alt="Logo Image">
                <div class="icon-container">
                    <img src="../img/store_alarm_active.png" alt="알람" class="icon">
                    <img src="../img/store_logout.png" alt="로그아웃" class="icon">
                </div>
            </div>
        </header>
        <main>
            <div class="main-header">
                <div class="storeName">러프도우</div>
                <div class="storeInfo">
                    <span class="addressIcon">
                        <img src="../img/store_address.png" alt="위치 아이콘">
                    </span>
                    <span class="storeAddress">서울시 강남구</span>
                    <span class="NumberIcon">
                        <img src="../img/store_number.png" alt="전화 아이콘">
                    </span>
                    <span class="storeNumber">02-1234-5678</span>
                </div>
            </div>
            <div class="store-image-slider">
                <div class="slider-track">
                    <img src="../img/store_img1.png" alt="Store Image 1" class="slider-img">
                    <img src="../img/store_img2.png" alt="Store Image 2" class="slider-img">
                    <img src="../img/store_img3.png" alt="Store Image 3" class="slider-img">
                    <img src="../img/store_img1.png" alt="Store Image 1" class="slider-img">
                    <img src="../img/store_img2.png" alt="Store Image 2" class="slider-img">
                </div>
                <div class="slider-indicators"></div>
            </div>
            <div class="sale-status">
                <div class="view-toggle">
                    <button id="open" class="view-button">오픈하기</button>
                    <button id="close" class="view-button">마감하기</button>
                </div>
            </div>
            <div class="sale-info">
                <p>오굿백 구성 후에 오픈 버튼을 눌러주세요 ~</p>
                <div class="info-title">
                    <img src="../img/store_bag.png" alt="오굿백 아이콘">
                    <p>오굿백</p>
                </div>
                <div class="info-content">
                    <p>러프도우의 직접만든 바게뜨, 소금빵이 들어가요.
                    <form>
                        <div class="form-group">
                            <label class="label">픽업 날짜</label>
                            <span class="divider">|</span>
                            <div class="btn-container">
                                <button type="button" class="pickup-btn " data-value="today">오늘</button>
                                <button type="button" class="pickup-btn" data-value="tomorrow">내일</button>
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="label">픽업 시간</label>
                            <span class="divider">|</span>
                            <input type="text" class="time-input" placeholder="" readonly>
                            <img src="../img/store_time.png" alt="시계 아이콘" class="timer-icon" id="timer-icon">

                            <!-- 모달 -->
                            <div id="time-modal" class="modal">
                                <div class="modal-content">
                                    <span class="close-modal" id="close-modal">&times;</span>
                                    <h3>픽업 시간 선택</h3>
                                    <!-- 원하는 시간 선택 UI를 여기에 넣으세요 -->
                                    <input type="time">
                                    <button>확인</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="label">원래 가격</label>
                            <span class="divider">|</span>
                            <input type="text">
                        </div>
                        <div class="form-group">
                            <label class="label">오굿백 가격</label>
                            <span class="divider">|</span>
                            <input type="text" class="time-input" placeholder="" readonly>
                        </div>
                        <div class="form-group">
                            <label class="label">오굿백 수량</label>
                            <span class="divider">|</span>
                            <div class="quantity-container">
                                <img src="../img/store_minus.png" alt="빼기 아이콘" class="quantity-icon" id="minus-btn">
                                <div class="count" id="count-value">1개</div>
                                <img src="../img/store_plus.png" alt="더하기 아이콘" class="quantity-icon" id="plus-btn">
                            </div>
                        </div>

                    </form>
                </div>
            </div>

        </main>
        <footer>
            <div class="footer-container">
                <div class="menu-container">
                    <div class="menu-item">
                        <img src="../img/store_home.png" data-name="home" alt="홈" class="menu-icon">
                    </div>
                    <div class="menu-item">
                        <img src="../img/store_review.png" data-name="review" alt="리뷰" class="menu-icon">
                    </div>
                    <div class="menu-item">
                        <img src="../img/store_order.png" data-name="order" alt="주문" class="menu-icon">
                    </div>
                    <div class="menu-item">
                        <img src="../img/store_mypage.png" data-name="mypage" alt="마이페이지" class="menu-icon">
                    </div>
                </div>
            </div>
        </footer>
    </div>
</body>
<script>
    const menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach(item => {
        item.addEventListener('click', function () {
            menuItems.forEach(i => {
                i.classList.remove('active');
                const img = i.querySelector('img');
                // 기본 이미지로 복원
                img.src = `../img/store_${img.dataset.name}.png`;
            });
            this.classList.add('active');
            const img = this.querySelector('img');
            // active 이미지로 변경
            img.src = `../img/store_${img.dataset.name}_active.png`;
        });
    });
    const track = document.querySelector('.slider-track');
    let images = Array.from(document.querySelectorAll('.slider-img'));
    const indicatorContainer = document.querySelector('.slider-indicators');
    let currentIndex = 0;
    let startX = 0;
    let currentX = 0;
    let isDragging = false;
    let imgWidth = images[0].clientWidth;

    // 인디케이터 생성
    function createIndicators() {
        indicatorContainer.innerHTML = '';
        for (let i = 0; i < images.length; i++) {
            const dot = document.createElement('div');
            dot.className = 'slider-indicator' + (i === currentIndex ? ' active' : '');
            indicatorContainer.appendChild(dot);
        }
    }

    // 인디케이터 업데이트
    function updateIndicators() {
        const dots = indicatorContainer.querySelectorAll('.slider-indicator');
        dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === currentIndex);
        });
    }

    // 슬라이더 위치 초기화
    function updateSlider(instant = false) {
        track.style.transition = instant ? 'none' : 'transform 0.3s';
        track.style.transform = `translateX(0px)`;
    }

    // 왼쪽(다음)으로 슬라이드
    function rotateLeft() {
        track.appendChild(track.firstElementChild);
        images = Array.from(track.children);
        currentIndex = (currentIndex + 1) % images.length;
        updateSlider(true);
        updateIndicators();
    }

    // 오른쪽(이전)으로 슬라이드
    function rotateRight() {
        track.insertBefore(track.lastElementChild, track.firstElementChild);
        images = Array.from(track.children);
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        updateSlider(true);
        updateIndicators();
    }

    // 터치 이벤트
    track.addEventListener('touchstart', (e) => {
        isDragging = true;
        startX = e.touches[0].clientX;
        currentX = startX;
        imgWidth = images[0].clientWidth;
        track.style.transition = 'none';
    });
    track.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        currentX = e.touches[0].clientX;
        const diff = currentX - startX;
        track.style.transform = `translateX(${diff}px)`;
    });
    track.addEventListener('touchend', (e) => {
        if (!isDragging) return;
        isDragging = false;
        const diff = currentX - startX;
        if (diff < -50) {
            track.style.transition = 'transform 0.3s';
            track.style.transform = `translateX(-${imgWidth}px)`;
            track.addEventListener('transitionend', rotateLeft, { once: true });
        } else if (diff > 50) {
            rotateRight();
            track.style.transition = 'none';
            track.style.transform = `translateX(-${imgWidth}px)`;
            setTimeout(() => {
                track.style.transition = 'transform 0.3s';
                track.style.transform = `translateX(0px)`;
            }, 10);
        } else {
            updateSlider();
        }
    });

    // 마우스 이벤트
    track.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        currentX = startX;
        imgWidth = images[0].clientWidth;
        track.style.transition = 'none';
        document.body.style.userSelect = 'none';
    });
    window.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        currentX = e.clientX;
        const diff = currentX - startX;
        track.style.transform = `translateX(${diff}px)`;
    });
    window.addEventListener('mouseup', (e) => {
        if (!isDragging) return;
        isDragging = false;
        const diff = currentX - startX;
        if (diff < -50) {
            track.style.transition = 'transform 0.3s';
            track.style.transform = `translateX(-${imgWidth}px)`;
            track.addEventListener('transitionend', rotateLeft, { once: true });
        } else if (diff > 50) {
            rotateRight();
            track.style.transition = 'none';
            track.style.transform = `translateX(-${imgWidth}px)`;
            setTimeout(() => {
                track.style.transition = 'transform 0.3s';
                track.style.transform = `translateX(0px)`;
            }, 10);
        } else {
            updateSlider();
        }
        document.body.style.userSelect = '';
    });

    // 초기화
    createIndicators();
    updateIndicators();
    updateSlider(true);

    //오픈, 마감 버튼 이벤트
    const viewButtons = document.querySelectorAll('.view-button');
    viewButtons.forEach(btn => {
        btn.addEventListener('click', function () {
            viewButtons.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
        });
    });

    //픽업 날짜 버튼 이벤트
    const pickupBtns = document.querySelectorAll('.pickup-btn');
    pickupBtns.forEach(btn => {
        btn.addEventListener('click', function () {
            pickupBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
        });
    });
    //오굿백 수량
    const minusBtn = document.getElementById('minus-btn');
    const plusBtn = document.getElementById('plus-btn');
    const countValue = document.getElementById('count-value');

    let count = 3; // 초기값

    function updateCount() {
        countValue.textContent = count + '개';
    }

    minusBtn.addEventListener('click', function () {
        if (count > 1) { // 최소 1개
            count--;
            updateCount();
        }
    });

    plusBtn.addEventListener('click', function () {
        count++;
        updateCount();
    });

    //알람 모달
    const timerIcon = document.getElementById('timer-icon');
    const timeModal = document.getElementById('time-modal');
    const closeModal = document.getElementById('close-modal');

    timerIcon.addEventListener('click', () => {
        timeModal.style.display = 'flex';
    });
    closeModal.addEventListener('click', () => {
        timeModal.style.display = 'none';
    });
    // 모달 바깥 클릭 시 닫기
    timeModal.addEventListener('click', (e) => {
        if (e.target === timeModal) timeModal.style.display = 'none';
    });
</script>

</html>